<h1 id='notification'>Notification</h1><h2 id='get-user-notification'>Get User Notification</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://community.tribe.so/api/v1/notifications"</span>
  -H <span class="s2">"Authorization: Bearer {access_token}"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">tribe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"tribe"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">tribe</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s2">"{access_token}"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">notifications</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">notifications</span><span class="p">.</span><span class="nx">list</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bf2ac9b86eb922c246e77ca"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-19T12:29:15.723Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-19T12:29:15.722Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-19T12:29:15.722Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"follow_user"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b1f99a7478dd3768d84b646"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__v"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailSent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objects"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bd164051f117e0440efb07c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"picture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://gravatar.com/avatar/533db9190e9912306ed3334e3dba2a56?s=200&amp;d=retro"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sayle"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sayele"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bd164051f117e0440efb07c"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bf210a61c546252b2d79030"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-19T01:23:50.998Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-19T01:23:50.998Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upvote"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b1f99a7478dd3768d84b646"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__v"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailSent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objects"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bd9d35ad242f810e3d84ab6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"picture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/files/users/ab6/5bd9d35ad242f810e3d84ab6_77365.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Soheil Alavi"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"soheil"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bd9d35ad242f810e3d84ab6"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5be36b573fb95035bf9085a5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:46:47.681Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:46:47.679Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:46:47.679Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ask"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b1f99a7478dd3768d84b646"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__v"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailSent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objects"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5be36b573fb95035bf9085a3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"shortId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QrmZ6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-22T22:09:56.432Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:46:47.522Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What is Tribe's Privacy Policy?"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"publishedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:46:47.519Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"portal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a73b1fcc48071e4c4dc1cae"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lastAskedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:46:47.519Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"actor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b3f7fe0d5a11b6297259cab"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"__v"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lastAnsweredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-07T22:47:16.105Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"referrers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"social"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"facebook"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5be36fa23fb95035bf9085a8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"hasReward"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"askers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"general"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"privacy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"anonymous"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5be36b573fb95035bf9085a3"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b913111f19a473232026877"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"picture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/files/users/877/5b913111f19a473232026877_65884.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adrian Garcia"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adriang"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b913111f19a473232026877"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves user notifications.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="request">GET /api/v1/notifications</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td><code>Number</code></td>
<td><code>1</code></td>
<td>Intended page</td>
</tr>
<tr>
<td>limit</td>
<td><code>Number</code></td>
<td><code>20</code></td>
<td>Number of items per page</td>
</tr>
</tbody></table>
<h2 id='get-user-notification-summary'>Get User Notification Summary</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://community.tribe.so/api/v1/notifications/summary"</span>
  -H <span class="s2">"Authorization: Bearer {access_token}"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">tribe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"tribe"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">tribe</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s2">"{access_token}"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">summaries</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">notifications</span><span class="p">.</span><span class="nx">summary</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves user notifications count.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code class="request">GET /api/v1/notifications/summary</code></p>
<h2 id='mark-all-notifications-as-read'>Mark All Notifications as Read</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://community.tribe.so/api/v1/notifications/summary"</span>
  -H <span class="s2">"Authorization: Bearer {access_token}"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">tribe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"tribe"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">tribe</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s2">"{access_token}"</span><span class="p">);</span>
<span class="nx">api</span><span class="p">.</span><span class="nx">notifications</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint marks all user notifications as read.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code class="request">POST /api/v1/notifications/read</code></p>
<h2 id='mark-a-specific-notification-as-read'>Mark a Specific Notification as Read</h2><pre class="highlight shell tab-shell"><code>  curl <span class="s2">"https://community.tribe.so/api/v1/notifications/5b913111f19a473232026877/read"</span>
  -X POST
  -H <span class="s2">"Authorization: Bearer {access_token}"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">tribe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"tribe"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">tribe</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s2">"{access_token}"</span><span class="p">);</span>
<span class="nx">api</span><span class="p">.</span><span class="nx">notifications</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="s2">"5b913111f19a473232026877"</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint marks a specific notification as read.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code class="request">POST /api/v1/notifications/:id/read</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><code>String</code></td>
<td>The ID of the notification to mark as read</td>
</tr>
</tbody></table>
<h2 id='firebase-notification'>Firebase Notification</h2><pre class="highlight shell tab-shell"><code>  curl <span class="s2">"https://community.tribe.so/api/v1/user/devices"</span>
  -X POST
  -H <span class="s2">"Authorization: Bearer {access_token}"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">tribe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"tribe"</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="p">...</span>
<span class="nx">api</span><span class="p">.</span><span class="nx">notifications</span><span class="p">.</span><span class="nx">registerDevice</span><span class="p">({</span> <span class="nx">token</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'ios'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'My Phone'</span> <span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you are using Firebase app, you can receive the firebase notification on user devices. After installing the app, you should paste your JSON configuration file in the app&#39;s settings section.</p>

<aside class="notice">
You must include <a href="https://firebase.google.com/docs/admin/setup#initialize-sdk"><code>&lt;Private Key&gt;</code></a> inside the JSON.
</aside>

<p>After finishing the configuration, you need you need to register the device tokens.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p>This endpoint register the token to a specific user.</p>

<p><code class="request">POST /api/v1/user/devices</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td><code>String</code></td>
<td>Type of the device. It can be <code>android</code>, <code>ios</code></td>
</tr>
<tr>
<td>token</td>
<td><code>String</code></td>
<td>The device token to register</td>
</tr>
<tr>
<td>name</td>
<td><code>String</code></td>
<td>Name associated to the device</td>
</tr>
</tbody></table>
<h3 id='http-request-6'>HTTP Request</h3>
<p>This endpoint discards the token from a specific user.</p>

<p><code class="request">DELETE /api/v1/user/devices</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td><code>String</code></td>
<td>The device token to discard</td>
</tr>
</tbody></table>
<h3 id='notification-object'>Notification Object</h3>
<p>The notification object you receive in the device have the following structure.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>Name of the portal</td>
</tr>
<tr>
<td>body</td>
<td>Message of the notification</td>
</tr>
<tr>
<td>name</td>
<td>Name of the user</td>
</tr>
<tr>
<td>icon</td>
<td>Icon of the notification</td>
</tr>
<tr>
<td>url</td>
<td>URL associated with the notification</td>
</tr>
<tr>
<td>tag</td>
<td>A static string with <code>notification</code> as value</td>
</tr>
</tbody></table>
